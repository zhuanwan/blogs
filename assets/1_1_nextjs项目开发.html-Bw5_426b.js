import{_ as o,c as i,e as c,a as n,b as u,w as e,r,o as k,d as s}from"./app-Cqb5tvJn.js";const d={},m={class:"hint-container details"};function b(v,a){const p=r("Tabs");return k(),i("div",null,[a[5]||(a[5]=c(`<h1 id="nextjs项目开发" tabindex="-1"><a class="header-anchor" href="#nextjs项目开发"><span>nextjs项目开发</span></a></h1><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">npx create-next-app@latest my-next-app</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>下面一些提示，选择你要的配置</p><h2 id="添加多语言、pc-mobile" tabindex="-1"><a class="header-anchor" href="#添加多语言、pc-mobile"><span>添加多语言、pc/mobile</span></a></h2><ul><li><a href="https://github.com/i18next/next-app-dir-i18next-example-ts" target="_blank" rel="noopener noreferrer">多语言项目参考链接</a></li><li><a href="https://github.com/zhuanwan/nexjs-demo" target="_blank" rel="noopener noreferrer">项目链接</a></li></ul><div class="hint-container note"><p class="hint-container-title">注</p><p>参考链接中url是对应的 <strong>/en/about</strong>、<strong>/zh/about</strong> 这种,我们统一希望改成 <strong>/about</strong>，并且区分移动端和pc端，所以修改目录和中间件</p></div>`,7)),n("details",m,[a[4]||(a[4]=n("summary",null,"详情",-1)),u(p,{id:"31",data:[{id:"目录"},{id:"中间件 middleware.ts"}]},{title0:e(({value:t,isActive:l})=>a[0]||(a[0]=[s("目录")])),title1:e(({value:t,isActive:l})=>a[1]||(a[1]=[s("中间件 middleware.ts")])),tab0:e(({value:t,isActive:l})=>a[2]||(a[2]=[n("div",{class:"language-javascript line-numbers-mode","data-highlighter":"prismjs","data-ext":"js"},[n("pre",null,[n("code",null,[n("span",{class:"line"},"src"),s(`
`),n("span",{class:"line"}," ┣ app"),s(`
`),n("span",{class:"line"}," ┃ ┣ mobile"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ home"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ news"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┗ solution"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┣ pc"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ home"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ news"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┗ solution"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┣ layout"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┗ page"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┣ components"),s(`
`),n("span",{class:"line"}," ┃ ┣ mobile"),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ footer"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ index"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ header"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ index"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┗ MobileFontScript"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┗ pc"),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ footer"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ index"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┗ header"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ index"),n("span",{class:"token punctuation"},"."),s("tsx")]),s(`
`),n("span",{class:"line"}," ┣ i18n"),s(`
`),n("span",{class:"line"}," ┃ ┣ locales"),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ de"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ home"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ solution"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┣ en"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ home"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ solution"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"}," ┃ ┃ ┗ zh"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ home"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ news"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┃ ┗ solution"),n("span",{class:"token punctuation"},"."),s("json")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┣ client"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┣ i18next"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┗ settings"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"}," ┣ styles"),s(`
`),n("span",{class:"line"}," ┃ ┣ mobile"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ ani"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ comm"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ footer"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ header"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ home"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ index"),n("span",{class:"token operator"},"-"),s("en"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┗ solution"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"}," ┃ ┗ pc"),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ about"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ ani"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ comm"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ contact"),n("span",{class:"token operator"},"-"),s("us"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ footer"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ header"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ home"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ index"),n("span",{class:"token operator"},"-"),s("en"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ index"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token operator"},"-"),s("detail"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ news"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┣ product"),n("span",{class:"token operator"},"-"),s("center"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┃ ┗ solution"),n("span",{class:"token punctuation"},"."),s("scss")]),s(`
`),n("span",{class:"line"}," ┣ utils"),s(`
`),n("span",{class:"line"},[s(" ┃ ┣ client"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"},[s(" ┃ ┗ service"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"},[s(" ┗ middleware"),n("span",{class:"token punctuation"},"."),s("ts")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),tab1:e(({value:t,isActive:l})=>a[3]||(a[3]=[n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" NextResponse"),n("span",{class:"token punctuation"},","),s(" NextRequest "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"next/server"'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(" acceptLanguage "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"accept-language"'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" fallbackLng"),n("span",{class:"token punctuation"},","),s(" languages"),n("span",{class:"token punctuation"},","),s(" cookieName"),n("span",{class:"token punctuation"},","),s(" headerName "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"@/i18n/settings"'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" isMobileByUserAgent "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},'"./utils/service"'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("acceptLanguage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"languages"),n("span",{class:"token punctuation"},"("),s("languages"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(" config "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  matcher"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"[")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// 仅匹配需要处理的非静态请求")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token string"},"'/((?!api|_next/static|_next/image|assets|favicon.ico|sw.js|site.webmanifest).*)'"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"isLanguage"),n("span",{class:"token punctuation"},"("),s("lang"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"return"),s(" languages"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),s("lang"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" rewriteUrls "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"[")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/about-us"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/contact-us"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/news"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/news-detail"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/product-center"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token string"},'"/solution"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"middleware"),n("span",{class:"token punctuation"},"("),s("req"),n("span",{class:"token operator"},":"),s(" NextRequest"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" pathname "),n("span",{class:"token operator"},"="),s(" req"),n("span",{class:"token punctuation"},"."),s("nextUrl"),n("span",{class:"token punctuation"},"."),s("pathname"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" url "),n("span",{class:"token operator"},"="),s(" req"),n("span",{class:"token punctuation"},"."),s("nextUrl"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"clone"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 静态资源直接跳过（保险起见）")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(png|jpg|jpeg|gif|svg|ico|webp|woff2?|ttf)$"),n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-flags"},"i")]),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"test"),n("span",{class:"token punctuation"},"("),s("pathname"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(" pathname"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/_next/'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(" NextResponse"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 检查 Cookie 和 Accept-Language")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"let"),s(" lng"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"string"),s(),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token keyword"},"undefined"),s(),n("span",{class:"token operator"},"="),s(" req"),n("span",{class:"token punctuation"},"."),s("cookies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("cookieName"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"?."),s("value"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("lng "),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token function"},"isLanguage"),n("span",{class:"token punctuation"},"("),s("lng"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" headerLang "),n("span",{class:"token operator"},"="),s(" acceptLanguage"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("req"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Accept-Language"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("headerLang "),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token function"},"isLanguage"),n("span",{class:"token punctuation"},"("),s("headerLang"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      lng "),n("span",{class:"token operator"},"="),s(" headerLang"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      lng "),n("span",{class:"token operator"},"="),s(" fallbackLng"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 创建带自定义 Header 的响应")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" headers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Headers"),n("span",{class:"token punctuation"},"("),s("req"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("headerName"),n("span",{class:"token punctuation"},","),s(" lng"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 设置语言 Header")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" userAgent "),n("span",{class:"token operator"},"="),s(" req"),n("span",{class:"token punctuation"},"."),s("headers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"user-agent"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},'""'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" isMobile "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"isMobileByUserAgent"),n("span",{class:"token punctuation"},"("),s("userAgent"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" deviceDir "),n("span",{class:"token operator"},"="),s(" isMobile "),n("span",{class:"token operator"},"?"),s(),n("span",{class:"token string"},'"mobile"'),s(),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"pc"'),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 内部重写路径但保持URL不变")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("rewriteUrls"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"some"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("route"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(" pathname"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"startsWith"),n("span",{class:"token punctuation"},"("),s("route"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    url"),n("span",{class:"token punctuation"},"."),s("pathname "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("deviceDir"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("pathname"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" response "),n("span",{class:"token operator"},"="),s(" NextResponse"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"rewrite"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" headers "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    response"),n("span",{class:"token punctuation"},"."),s("cookies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("cookieName"),n("span",{class:"token punctuation"},","),s(" lng"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      maxAge"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"24"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"365"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("      sameSite"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"lax"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(" response"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 处理根路径 /")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("pathname "),n("span",{class:"token operator"},"==="),s(),n("span",{class:"token string"},'"/"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    url"),n("span",{class:"token punctuation"},"."),s("pathname "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("deviceDir"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"/home"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" response "),n("span",{class:"token operator"},"="),s(" NextResponse"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"rewrite"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(" headers "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    response"),n("span",{class:"token punctuation"},"."),s("cookies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("cookieName"),n("span",{class:"token punctuation"},","),s(" lng"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      maxAge"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"24"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"365"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("      sameSite"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"lax"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(" response"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 其他请求处理")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"const"),s(" response "),n("span",{class:"token operator"},"="),s(" NextResponse"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"next"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" headers "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  response"),n("span",{class:"token punctuation"},"."),s("cookies"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("cookieName"),n("span",{class:"token punctuation"},","),s(" lng"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    maxAge"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"60"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"24"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"365"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("    sameSite"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},'"lax"'),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token keyword"},"return"),s(" response"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),_:1})]),a[6]||(a[6]=c(`<h2 id="首次加载特别慢" tabindex="-1"><a class="header-anchor" href="#首次加载特别慢"><span>首次加载特别慢</span></a></h2><p>第一次tab切换，访问页面速度特别慢，是因为页面第一次访问时nextjs需要构建页面，那么我们可以把页面页面或组件以类似 SSG（静态生成） 的方式构建</p><p>下面是nextjs服务端三种模式</p><table><thead><tr><th>模式</th><th>场景</th><th>服务端构建行为</th><th>页面是否实时更新</th><th>用法</th><th>性能</th></tr></thead><tbody><tr><td>SSG</td><td>只在构建时拉取数据</td><td>构建时一次性生成 HTML（静态）</td><td>需要重新build</td><td>export const dynamic = &#39;force-static&#39; + fetch()</td><td>极快</td></tr><tr><td>SSR</td><td>实时更新</td><td>每次请求都由服务端动态生成 HTML</td><td>总是更新</td><td>fetch(..., { cache: &#39;no-store&#39; })</td><td>较慢</td></tr><tr><td>ISR</td><td>定期更新</td><td>构建时生成 HTML，后续定期自动刷新</td><td>半实时（渐进更新）</td><td>fetch(..., { next: { revalidate: 60 } })</td><td>优</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// app/pc/home/page.tsx</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> dynamic <span class="token operator">=</span> <span class="token string">&#39;force-static&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://api.example.com/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 为确保静态化，使用 \`cache: &#39;force-cache&#39;\`（默认）</span></span>
<span class="line">    <span class="token comment">// 这在构建时会执行，生成静态 HTML</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token operator">&lt;</span>main<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>但是这样用不了多语言切换，放弃，在<strong>Link</strong>中加prefetch，好像也没多大作用，目前暂时没有找到好的解决方案</p></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&quot;next/link&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">&lt;</span>Link</span>
<span class="line">  href<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span>
<span class="line">  prefetch<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">&gt;</span></span>
<span class="line">  name</span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7))])}const h=o(d,[["render",b]]),x=JSON.parse('{"path":"/frame/1_1_nextjs%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91.html","title":"nextjs项目开发","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"添加多语言、pc/mobile","slug":"添加多语言、pc-mobile","link":"#添加多语言、pc-mobile","children":[]},{"level":2,"title":"首次加载特别慢","slug":"首次加载特别慢","link":"#首次加载特别慢","children":[]}],"git":{"updatedTime":1747644637000,"contributors":[{"name":"wu.hui","username":"","email":"wu.hui@qkupower.com","commits":2}],"changelog":[{"hash":"d5e63ea464c529d0f8105335b42e320cb8e2f2b2","time":1747644637000,"email":"wu.hui@qkupower.com","author":"wu.hui","message":"feat: up"},{"hash":"aaea3b82afbf7a2bee207614f5c7bf523178ab40","time":1747380039000,"email":"wu.hui@qkupower.com","author":"wu.hui","message":"feat: up"}]},"filePathRelative":"frame/1_1_nextjs项目开发.md"}');export{h as comp,x as data};
