import{_ as a,c as n,e,o as l}from"./app-Cqb5tvJn.js";const i={};function t(p,s){return l(),n("div",null,s[0]||(s[0]=[e(`<h1 id="mysql安装" tabindex="-1"><a class="header-anchor" href="#mysql安装"><span>mysql安装</span></a></h1><h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><p>本机 mac，mysql8，报错信息：Access denied for user: &#39;root@localhost&#39; 官网下载mysql，一步一步安装，然后🈶提示输入密码，但是登陆就是不成功，只好重置密码，找了很久的方法，终于可行，记录下</p><h2 id="设置环境变量" tabindex="-1"><a class="header-anchor" href="#设置环境变量"><span>设置环境变量</span></a></h2><p>安装完后，首先改变环境变量，这样就不用到bin里面执行了</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">open</span> ~/.bash_profile</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>path：多个环境变量以冒号分隔，像这里我有加jdk</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/Library/Java/JavaVirtualMachines/jdk-14.jdk/Contents/Home</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/lib/tools.jar:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:.</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">MYSQL</span><span class="token operator">=</span>/usr/local/mysql/bin</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$MYSQL</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>:.</span>
<span class="line"></span>
<span class="line"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysqlstart</span><span class="token operator">=</span><span class="token string">&#39;sudo /usr/local/mysql/support-files/mysql.server start&#39;</span></span>
<span class="line"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysqlstop</span><span class="token operator">=</span><span class="token string">&#39;sudo /usr/local/mysql/support-files/mysql.server stop&#39;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="重置密码" tabindex="-1"><a class="header-anchor" href="#重置密码"><span>重置密码</span></a></h2><h3 id="先关闭mysql服务" tabindex="-1"><a class="header-anchor" href="#先关闭mysql服务"><span>先关闭mysql服务</span></a></h3><p>这里我是直接在活动监视器里查找mysql，关闭，网上有其他方法（在终端输入： ps axu|grep mysql 找出 mysql 的进程id 用 kill 方法 kill 掉）</p><h3 id="安全模式进入数据库" tabindex="-1"><a class="header-anchor" href="#安全模式进入数据库"><span>安全模式进入数据库</span></a></h3><p>打开一个终端</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token builtin class-name">cd</span> /usr/local/mysql/bin</span>
<span class="line">$ <span class="token function">sudo</span> <span class="token function">su</span></span>
<span class="line">sh-3.2<span class="token comment"># ./mysqld_safe --skip-grant-tables &amp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置密码" tabindex="-1"><a class="header-anchor" href="#设置密码"><span>设置密码</span></a></h3><p>重新打开一个终端</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">mysql <span class="token parameter variable">-u</span> <span class="token parameter variable">-root</span>  // 可以不输入密码就进入了</span>
<span class="line">use mysql<span class="token punctuation">;</span></span>
<span class="line">update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">authentication_string</span><span class="token operator">=</span><span class="token string">&#39;&#39;</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span>  // 这个先把密码设空？？？</span>
<span class="line"></span>
<span class="line">ALTER user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED BY <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>   // 这里报错，就先输入flush privileges<span class="token punctuation">;</span></span>
<span class="line">flush privileges<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新登录" tabindex="-1"><a class="header-anchor" href="#重新登录"><span>重新登录</span></a></h3><p>把终端都关闭 再次关闭mysql服务 然后重新打开终端</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span></span>
<span class="line">// 输入123456</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>🎉 🌸 🎉 🌸 🎉 🌸</p><h3 id="navicat-连接" tabindex="-1"><a class="header-anchor" href="#navicat-连接"><span>navicat 连接</span></a></h3><p>用navicat连接，发现报错 “Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded” 进入mysql, 执行</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">ALTER <span class="token environment constant">USER</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重置密码-1" tabindex="-1"><a class="header-anchor" href="#重置密码-1"><span>重置密码</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">rpm <span class="token operator">-</span>qa <span class="token operator">|</span> grep mysql <span class="token comment">// 查看mysql安装信息</span></span>
<span class="line">mysqladmin <span class="token operator">--</span>version  <span class="token comment">// 查看版本</span></span>
<span class="line">systemctl start mysqld <span class="token comment">// 启动mysql</span></span>
<span class="line">systemctl status mysqld <span class="token comment">// 查看myqsl状态</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>在 /etc/my.cnf 添加skip-grant-tables，作用是登录mysql的时候跳过密码验证</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">skip<span class="token operator">-</span>grant<span class="token operator">-</span>tables</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>重启mysql服务，并进入mysql</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">service mysqld restart</span>
<span class="line">mysql <span class="token operator">-</span>u root</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>修改用户密码</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">update mysql<span class="token punctuation">.</span>user <span class="token keyword">set</span> authentication_string<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&#39;密码要复杂点&#39;</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span></span>
<span class="line">flush privileges<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>在 /etc/my.cnf 去除 skip-grant-tables</li><li>重新进入mysql，输入mysql -u root -p，enter 输入密码</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="阿里云mysql数据库连接不上" tabindex="-1"><a class="header-anchor" href="#阿里云mysql数据库连接不上"><span>阿里云mysql数据库连接不上</span></a></h3><ol><li>在装有MySQL的机器上登录MySQL mysql -u root -p密码</li><li>执行use mysql;</li><li>执行update user set host = &#39;%&#39; where user = &#39;root&#39;;</li><li>执行FLUSH PRIVILEGES;</li></ol>`,36)]))}const c=a(i,[["render",t]]),o=JSON.parse('{"path":"/tools/mysql%E5%AE%89%E8%A3%85.html","title":"mysql安装","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"设置环境变量","slug":"设置环境变量","link":"#设置环境变量","children":[]},{"level":2,"title":"重置密码","slug":"重置密码","link":"#重置密码","children":[{"level":3,"title":"先关闭mysql服务","slug":"先关闭mysql服务","link":"#先关闭mysql服务","children":[]},{"level":3,"title":"安全模式进入数据库","slug":"安全模式进入数据库","link":"#安全模式进入数据库","children":[]},{"level":3,"title":"设置密码","slug":"设置密码","link":"#设置密码","children":[]},{"level":3,"title":"重新登录","slug":"重新登录","link":"#重新登录","children":[]},{"level":3,"title":"navicat 连接","slug":"navicat-连接","link":"#navicat-连接","children":[]},{"level":3,"title":"重置密码","slug":"重置密码-1","link":"#重置密码-1","children":[]},{"level":3,"title":"阿里云mysql数据库连接不上","slug":"阿里云mysql数据库连接不上","link":"#阿里云mysql数据库连接不上","children":[]}]}],"git":{"updatedTime":1662688632000,"contributors":[{"name":"wuhui","username":"wuhui","email":"maniwu@aijiatui.com","commits":5,"url":"https://github.com/wuhui"},{"name":"wu.hui","username":"","email":"wu.hui@qkupower.com","commits":1}],"changelog":[{"hash":"80bd049b53d01ec711c1192d7768001e68b5c4c7","time":1662688632000,"email":"wu.hui@qkupower.com","author":"wu.hui","message":"feat: up"},{"hash":"22549e7953a41909f4b84da9c0fc81e3df7a1ca8","time":1622022772000,"email":"maniwu@aijiatui.com","author":"wuhui","message":"up"},{"hash":"ece683193851ecd2869fc166e8f8ace19055b36b","time":1607503623000,"email":"maniwu@aijiatui.com","author":"wuhui","message":"up"},{"hash":"1e58b35065a6ad60c9c655f9d9635a6c3947f3c2","time":1598237558000,"email":"maniwu@aijiatui.com","author":"wuhui","message":"up"},{"hash":"e3a7b9017dd60ea02f4e916642566a18ef50ffcc","time":1589944117000,"email":"maniwu@aijiatui.com","author":"wuhui","message":"up"},{"hash":"d2b0f6e6d5afd203845e235dab9ae35797e9a5ef","time":1589881311000,"email":"maniwu@aijiatui.com","author":"wuhui","message":"up"}]},"filePathRelative":"tools/mysql安装.md"}');export{c as comp,o as data};
